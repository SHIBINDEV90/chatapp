<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,500;0,700;1,300&display=swap" rel="stylesheet">

<link rel="stylesheet" href="styles.css">

</head>
<body>

    
    <div class="login-wrapper" >
        <a href="#" class="main-link" style="color: #424242;" id="loginBtn">Login with Google</a>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-auth.js"></script>
     <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-firestore.js"></script> 
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-analytics.js"></script>

    <script>

        var firebaseConfig = {
        apiKey: "AIzaSyBjSfhWG1tqqBAEwveu5rm-j5RPL7fBOBY",
        authDomain: "my-chat-app-ac3b5.firebaseapp.com",
        projectId: "my-chat-app-ac3b5",
        storageBucket: "my-chat-app-ac3b5.appspot.com",
        messagingSenderId: "783247609528",
        appId: "1:783247609528:web:a402e671cc81648fa4ee4d",
        measurementId: "G-X7MQ40STCL"
    };

    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
     var login_button = document.querySelector('#loginBtn');
     var provider = new firebase.auth.GoogleAuthProvider();


     firebase.auth().onAuthStateChanged((user) => {
  if (user) {
   
    var uid = user.uid;
    window.location = 'index.html'

  } else {
   console.log("User is not logged in")
  }
});
     

    login_button.addEventListener('click' , function(e) {
        firebase.auth().signInWithPopup(provider).then(function(e){
            
            window.location = 'index.html'
        })
        .catch(function(e){
            console.log('Error occured', e)
        })

         
        })
    </script>
    
</body>
</html>